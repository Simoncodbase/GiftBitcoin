<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<title>Review Your Card & Payment</title>
<script src="https://js.stripe.com/v3/"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<style>
    :root {
        --card-width: 30vw;
        --card-height: 40vw;
        --image-height: 30vw;
        --text-area-height: 10vw;
    }

    * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
    }

    body {
        font-family: Arial, sans-serif;
        line-height: 1.6;
        padding: 20px;
    }

    .main-container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
        display: flex;
        gap: 20px;
    }

    .printable-container {
        flex-shrink: 0;
        width: 30vw;
    }

    #card-container {
        width: var(--card-width);
        height: var(--card-height);
        position: relative;
        border: 1px solid #000;
        background-color: white;
    }

    #background {
        width: 100%;
        height: var(--image-height);
        position: absolute;
        top: 0;
        left: 0;
        display: block;
    }

    #text-area {
        position: absolute;
        top: var(--image-height);
        left: 0;
        width: 100%;
        height: var(--text-area-height);
        background-color: transparent;
    }

    .controls-container {
        flex-grow: 1;
        max-width: 600px;
    }

    button {
        background: #F59E0B;
        color: #000;
        font-family: Arial, sans-serif;
        border-radius: 8px;
        border: 0;
        padding: 12px 16px;
        font-size: 16px;
        font-weight: bold;
        cursor: pointer;
        display: block;
        width: 100%;
        margin-bottom: 10px;
    }

    button:hover {
        background: #FBBF24;
    }

    #payment-options, #payment-form {
        margin-bottom: 20px;
    }
</style>
</head>
<body>
<div class="main-container">
    <div class="printable-container">
        <div id="card-container"></div>
    </div>
    <div class="controls-container">
        <form id="payment-options">
            <h2>Payment Options</h2>
            <label for="currency-select">Currency:</label>
            <select id="currency-select" name="currency">
                <option value="USD">USD</option>
                <option value="EUR">EUR</option>
                <option value="CHF">CHF</option>
            </select>
            <br><br>
            <label for="amount-input">Amount:</label><br>
            <input type="number" id="amount-input" name="amount-input" min="1" step="1">
            <br><br>
            <div id="amount-message"></div>
            <br>
            <button id="proceed-to-payment" type="button">Proceed to Payment</button>
        </form>
        <button onclick="editCard()">Edit Card</button>
        <button id="pdf-button">Click for PDF of Card (takes 3 seconds to generate)</button>
        <form id="payment-form">
            <h2>Payment Details</h2>
            <div id="payment-element"></div>
            <button id="submit" type="submit">
                <span id="button-text">Pay now</span>
            </button>
            <div id="payment-message"></div>
        </form>
    </div>
</div>
<script>
    function displaySavedCard() {
        const cardContainer = document.getElementById('card-container');
        const savedCardHTML = localStorage.getItem('cardHTML');
        cardContainer.innerHTML = savedCardHTML || '<p>No card data found. Please create your card first.</p>';
    }

    function editCard() {
        window.location.href = 'home.html';
    }

    document.addEventListener('DOMContentLoaded', displaySavedCard);
</script>
</body>
</html>
